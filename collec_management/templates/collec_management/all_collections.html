{% extends "collec_management/navbar.html" %}
{% load django_bootstrap5 %}

{% block title %}
<div class="d-flex p-2 justify-content-center shadow p-3 bg-light rounded">
  <h2 class="fw-bold">Liste des collections</h2>
</div>
{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="table-responsive">
    <table class="table table-striped table-hover table-bordered">
      <thead class="table-secondary">
        <tr>
          <th scope="col" class="text-center py-4">Titre</th>
          <th scope="col" class="text-center py-4">Date</th>
          <th scope="col" class="text-center py-4">Détails</th>
        </tr>
      </thead>
      <tbody>
        {% for collection in collections %}
        <tr>
          <td class="text-center pt-4 pb-4">{{ collection.title }}</td>
          <td class="text-center pt-4 pb-4">{{ collection.date }}</td>
          <td class="d-flex justify-content-around">
            {% if user.pk == collection.user.pk %}
            <a href={% url "collection" collection.pk %} class="btn btn-info btn-md mt-2 mb-2 text-white">Voir Détails</a>
            <a href={% url "edit_collection" collection.pk %} class="btn btn-primary btn-md mt-2 mb-2">Modifier</a>
            <a href={% url "delete_collection" collection.pk %} class="btn btn-danger btn-md mt-2 mb-2">Supprimer</a>
            {% elif user.pk != collection.user.pk %}
            <p class="p-2">Cette collection n'est pas la votre,
              <a class="link-info link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover" href={% url "new_collec" %}>Faite votre collection pour la modifier</a>
            </p>
            {% endif %}
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3" class="text-center">Aucune collection disponible.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    <footer class="d-flex justify-content-center">
      <a href={% url "index" %} class="btn btn-secondary btn-lg">Retour à la page principale</a>
    </footer>
  </div>
</div>
{% endblock %}
